---
layout: gallery
---

<style>
        .gallery {
            display: flex;
            flex-wrap: wrap;
        }

        .img-cover {
            object-fit: contain;
            width: 100px;
            height: 100px;
            margin: 10px 10px;
            border: solid 1px black;
        }
    </style>
<div class="container max-w-4xl mt-6  px-6">
    <div class="pb-5 mb-5 border-b border-gray-100">
           
           <div class="gallery">



    {% set postslist = collections.work %}

    {% for post in postslist | reverse %}
    	<!-- <a href="{{ post.url | url }}"> -->
            <a href="/test/{{ post.data.page.fileSlug | url }}">
        <img class="img-cover" data-src="{{post.data.cover}}" />   <span></span>        
                </a>
        
        
    {% endfor %}
</div>
        </p>

    </div>
    

</div>

<script type="text/javascript">
    let options = {
  rootMargin: "0px",
  threshold: 1.0,
};

const callback = (entries, observer) => {
  const inView = entries.filter((e) => e.isIntersecting);
  const shuffledArray = inView.sort((a, b) => 0.5 - Math.random());
  
  shuffledArray.map((element, index) => {
    if (!element.isIntersecting) return;
    observer.unobserve(element.target);
    console.log(index);
    setTimeout(() => {
      console.log(element.target.getAttribute("data-src"));
      element.target.setAttribute(
        "src",
        element.target.getAttribute("data-src")
      );
    }, 500 * index + 200);
  });
};

let observer = new IntersectionObserver(callback, options);

document.querySelectorAll(".img-cover").forEach((element) => {
    observer.observe(element)
});


// observer.observe(document.querySelectorAll(".img-cover"));
</script>